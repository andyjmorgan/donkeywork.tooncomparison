services:
  format-tokenizer:
    image: 192.168.0.140:8443/toon-token:latest
    platform: linux/amd64
    build:
      context: .
      dockerfile: Dockerfile
    container_name: format-tokenizer
    ports:
      - "8081:80"
    restart: unless-stopped

  token-counter-api:
    image: 192.168.0.140:8443/toon-token-backend:latest
    platform: linux/amd64
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: token-counter-api
    ports:
      - "8000:8000"
    env_file:
      - ./backend/.env
    environment:
      - CORS_ORIGINS=http://localhost:5173,http://localhost:8081
    restart: unless-stopped
